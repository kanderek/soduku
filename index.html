<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Uber - Soduku</title>
    <link rel="stylesheet" href="css/sudoku.css">
  </head>

  <body>

    <header>
      <div class="headline">
        <h1>Sudoku Times</h1>
        <button>New puzzle</button>
      </div>
    </header>

    <main class="group">

      <section id="game-details" class="group">
        <div class="difficulty-display">
          <p>Difficulty:</p>
          <p><span>Easy</span></p>
        </div>

        <div id="timer-1" class="timer">
          <div class="timer-display">
            <p>Timer:</p>
            <p><span class="time-passed">0:00</span></p>
          </div>
          <input type="checkbox" class="toggle" id="timer-start" value="start">
          <label for="timer-start">Start</label>
        </div>
      </section>

      <section id="puzzle" class="group">
    <table id="soduku-board">
      <tbody>
      <tr>
        <td><div class="cell"><input type="number" min="1" max="9" data-cell="1,1"><div class="hint-overlay">123</div></div></td>
        <td><input type="number" min="1" max="9" data-cell="1,2"></td>
        <td><input type="number" min="1" max="9" data-cell="1,3"></td>
        <td><input type="number" min="1" max="9" data-cell="2,1"></td>
        <td><input type="number" min="1" max="9" data-cell="2,2"></td>
        <td><input type="number" min="1" max="9" data-cell="2,3"></td>
        <td><input type="number" min="1" max="9" data-cell="3,1"></td>
        <td><input type="number" min="1" max="9" data-cell="3,2"></td>
        <td><input type="number" min="1" max="9" data-cell="3,3"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="1,4"></td>
        <td><input type="number" min="1" max="9" data-cell="1,5"></td>
        <td><input type="number" min="1" max="9" data-cell="1,6"></td>
        <td><input type="number" min="1" max="9" data-cell="2,4"></td>
        <td><input type="number" min="1" max="9" data-cell="2,5"></td>
        <td><input type="number" min="1" max="9" data-cell="2,6"></td>
        <td><input type="number" min="1" max="9" data-cell="3,4"></td>
        <td><input type="number" min="1" max="9" data-cell="3,5"></td>
        <td><input type="number" min="1" max="9" data-cell="3,6"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="1,7"></td>
        <td><input type="number" min="1" max="9" data-cell="1,8"></td>
        <td><input type="number" min="1" max="9" data-cell="1,9"></td>
        <td><input type="number" min="1" max="9" data-cell="2,7"></td>
        <td><input type="number" min="1" max="9" data-cell="2,8"></td>
        <td><input type="number" min="1" max="9" data-cell="2,9"></td>
        <td><input type="number" min="1" max="9" data-cell="3,7"></td>
        <td><input type="number" min="1" max="9" data-cell="3,8"></td>
        <td><input type="number" min="1" max="9" data-cell="3,9"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="4,1"></td>
        <td><input type="number" min="1" max="9" data-cell="4,2"></td>
        <td><input type="number" min="1" max="9" data-cell="4,3"></td>
        <td><input type="number" min="1" max="9" data-cell="5,1"></td>
        <td><input type="number" min="1" max="9" data-cell="5,2"></td>
        <td><input type="number" min="1" max="9" data-cell="5,3"></td>
        <td><input type="number" min="1" max="9" data-cell="6,1"></td>
        <td><input type="number" min="1" max="9" data-cell="6,2"></td>
        <td><input type="number" min="1" max="9" data-cell="6,3"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="4,4"></td>
        <td><input type="number" min="1" max="9" data-cell="4,5"></td>
        <td><input type="number" min="1" max="9" data-cell="4,6"></td>
        <td><input type="number" min="1" max="9" data-cell="5,4"></td>
        <td><input type="number" min="1" max="9" data-cell="5,5"></td>
        <td><input type="number" min="1" max="9" data-cell="5,6"></td>
        <td><input type="number" min="1" max="9" data-cell="6,4"></td>
        <td><input type="number" min="1" max="9" data-cell="6,5"></td>
        <td><input type="number" min="1" max="9" data-cell="6,6"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="4,7"></td>
        <td><input type="number" min="1" max="9" data-cell="4,8"></td>
        <td><input type="number" min="1" max="9" data-cell="4,9"></td>
        <td><input type="number" min="1" max="9" data-cell="5,7"></td>
        <td><input type="number" min="1" max="9" data-cell="5,8"></td>
        <td><input type="number" min="1" max="9" data-cell="5,9"></td>
        <td><input type="number" min="1" max="9" data-cell="6,7"></td>
        <td><input type="number" min="1" max="9" data-cell="6,8"></td>
        <td><input type="number" min="1" max="9" data-cell="6,9"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="7,1"></td>
        <td><input type="number" min="1" max="9" data-cell="7,2"></td>
        <td><input type="number" min="1" max="9" data-cell="7,3"></td>
        <td><input type="number" min="1" max="9" data-cell="8,1"></td>
        <td><input type="number" min="1" max="9" data-cell="8,2"></td>
        <td><input type="number" min="1" max="9" data-cell="8,3"></td>
        <td><input type="number" min="1" max="9" data-cell="9,1"></td>
        <td><input type="number" min="1" max="9" data-cell="9,2"></td>
        <td><input type="number" min="1" max="9" data-cell="9,3"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="7,4"></td>
        <td><input type="number" min="1" max="9" data-cell="7,5"></td>
        <td><input type="number" min="1" max="9" data-cell="7,6"></td>
        <td><input type="number" min="1" max="9" data-cell="8,4"></td>
        <td><input type="number" min="1" max="9" data-cell="8,5"></td>
        <td><input type="number" min="1" max="9" data-cell="8,6"></td>
        <td><input type="number" min="1" max="9" data-cell="9,4"></td>
        <td><input type="number" min="1" max="9" data-cell="9,5"></td>
        <td><input type="number" min="1" max="9" data-cell="9,6"></td>
      </tr>
      <tr>
        <td><input type="number" min="1" max="9" data-cell="7,7"></td>
        <td><input type="number" min="1" max="9" data-cell="7,8"></td>
        <td><input type="number" min="1" max="9" data-cell="7,9"></td>
        <td><input type="number" min="1" max="9" data-cell="8,7"></td>
        <td><input type="number" min="1" max="9" data-cell="8,8"></td>
        <td><input type="number" min="1" max="9" data-cell="8,9"></td>
        <td><input type="number" min="1" max="9" data-cell="9,7"></td>
        <td><input type="number" min="1" max="9" data-cell="9,8"></td>
        <td><input type="number" min="1" max="9" data-cell="9,9"></td>
      </tr>
    </tbody>
    </table>
  </section>

      <section id="game-controls" class="group">
        <div id="pallete" class="medium-toggle group">
          <input type="radio" id="medium-option1" class="toggle-select toggle-select-left" name="medium" value="pen" checked>
          <label for="medium-option1">Pen</label>
          <input type="radio" id="medium-option2" class="toggle-select toggle-select-right" name="medium" value="pencil">
          <label for="medium-option2">Pencil</label>
        </div>

        <div class="hint">
          <button>Show hint</button> 
        </div>
    </section>
    </main>

    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="js/Timer.js"></script>
    <script src="js/Sudoku.js"></script>
    <script>

      var sudokuBoard = $("#soduku-board");
      var sudoku = new SudokuGame("easy");
      var puzzle;
      var timer = new Timer("#timer-1 .time-passed");
      var medium = "pen";

      var maintainAspectRatio = function(){
        sudokuBoard.css("height", sudokuBoard.width());
      }

      $(document).on("load", (function(){
        //initializing function calls
        maintainAspectRatio();
        drawPuzzleDom(sudoku.puzzle);
      })());
      
      $(window).resize(maintainAspectRatio);

      // Widget Event handlers (TODO: consolidate events)

      $("#timer-1 .toggle").on("click", function(event){
        var target = event.target ? event.target : event.srcElement;
        target.checked ? timer.start() : timer.stop();

      });

      $("#pallete .toggle-select").on("click", function(event){
        var target = event.target ? event.target : event.srcElement;
        medium = target.value;
      });

      sudokuBoard.on("click", function(event){
        var target = event.target ? event.target : event.srcElement;
        console.log(target.disabled);
        if(!target.className && !target.disabled){
          $(target).removeClass().addClass(medium);
        }
      });

      sudokuBoard.on("change", function(event){
        console.log("cell value changed...");
        var $target = event.target ? $(event.target) : $(event.srcElement);
        var newCellValue = $target.val();

        $target.removeClass().addClass(medium);
        // console.log(event.target.dataset.cell);
        //validate value of cell 
        // try {
        //   board.updateCell()){
        //   if(board.isComplete()){
        //     //notify play of win or lose
        //   }
        // }
        // catch(error){
        //   //notify player of invalid entry
        // }
          
      });

      // END event handlers

      function drawPuzzleDom(puzzle){
        $("td > input").each(function(index, cell){
          // var value = $(this).attr("data-cell").split(",")[1];
          // console.log(board);
          var rowIndex = Math.floor((index)/9);
          var colIndex = (index)%9 ;
          var disabled = true;
          // console.log(rowIndex + ", " + colIndex);
          // console.log(board[rowIndex][colIndex]);
          var value = puzzle[rowIndex][colIndex];
          if(value === 0){
            disabled = false;
            value = " ";
          }

          $(this).val(value);
          $(this).attr("disabled", disabled);
        });
      }

      

      var board = new SudokuBoard();
      // drawBoard([]);

    </script>
  </body>
</html>
